<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Couch Funds | Tycoon Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE STYLES --- */
        :root {
            --bg-deep: #022c22;
            --bg-glass: rgba(255, 255, 255, 0.03);
            --bg-glass-hover: rgba(255, 255, 255, 0.08);
            --border-glass: rgba(255, 255, 255, 0.1);
            --accent-gold: #fbbf24;
            --accent-green: #34d399;
            --accent-red: #f87171;
            --text-main: #ecfdf5;
            --text-muted: #6ee7b7;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-user-select: none; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Space Grotesk', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            position: relative;
            padding-bottom: 80px;
        }

        /* --- BACKGROUND FX --- */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.4;
            animation: float 20s infinite alternate;
        }
        .orb-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: var(--accent-green); }
        .orb-2 { bottom: -10%; right: -10%; width: 40vw; height: 40vw; background: #065f46; animation-delay: -5s; }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 50px); }
        }

        .container {
            width: 90%;
            max-width: 800px;
            text-align: center;
            z-index: 1;
            padding-top: 60px;
        }

        .brand {
            font-family: 'Outfit', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            letter-spacing: 2px;
            color: var(--accent-gold);
            margin-bottom: 2rem;
            text-transform: uppercase;
            opacity: 0.8;
        }

        /* --- CARDS (Used for Tips & Games) --- */
        .tip-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: 30px;
            padding: 3rem 2rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .tip-label {
            font-family: 'Outfit', sans-serif;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--accent-green);
            margin-bottom: 1rem;
            display: block;
        }

        .tip-content {
            font-family: 'Outfit', sans-serif;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 600;
            line-height: 1.4;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-shuffle {
            background: transparent;
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Space Grotesk', sans-serif;
            margin-top: 1.5rem;
        }
        .btn-shuffle:hover { background: var(--accent-green); color: var(--bg-deep); }

        /* --- TIC TAC TOE STYLES --- */
        #ttt-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 260px;
            margin: 20px auto;
        }
        .ttt-cell {
            aspect-ratio: 1/1;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
            cursor: pointer;
            transition: 0.2s;
        }
        .ttt-cell:hover { background: rgba(255,255,255,0.1); }
        .ttt-cell.x { color: var(--accent-green); text-shadow: 0 0 10px rgba(52, 211, 153, 0.5); }
        .ttt-cell.o { color: var(--accent-red); text-shadow: 0 0 10px rgba(248, 113, 113, 0.5); }


        /* --- TYCOON UI --- */
        .game-section {
            width: 100%;
            margin-top: 20px;
            border-top: 1px solid var(--border-glass);
            padding-top: 40px;
        }

        /* PROGRESS BAR */
        .goal-container {
            margin-bottom: 20px;
            text-align: left;
        }
        .goal-labels { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 5px; }
        .progress-bar-bg {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-gold));
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px var(--accent-green);
        }

        .balance-display {
            font-family: 'Outfit', sans-serif;
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--text-main);
            text-shadow: 0 0 30px rgba(52, 211, 153, 0.2);
            line-height: 1;
        }
        
        .balance-subtitle { font-size: 1rem; color: var(--text-muted); margin-top: 5px; }

        /* CLICKER */
        .click-area {
            position: relative;
            margin: 40px auto;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .couch-btn {
            width: 160px;
            height: 160px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            border: 8px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 40px rgba(16, 185, 129, 0.3), inset 0 5px 20px rgba(255,255,255,0.2);
            cursor: pointer;
            font-size: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
            position: relative;
            z-index: 10;
        }
        .couch-btn:active { transform: scale(0.90); }
        .couch-btn:hover { transform: scale(1.05); box-shadow: 0 0 60px rgba(16, 185, 129, 0.5); }

        /* FLOATING TEXT */
        .floating-text {
            position: absolute;
            color: var(--accent-gold);
            font-weight: bold;
            font-size: 1.5rem;
            pointer-events: none;
            animation: floatUp 0.8s ease-out forwards;
            z-index: 20;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-80px) scale(1.2); opacity: 0; }
        }

        /* UPGRADE STORE */
        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .upgrade-card {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            padding: 15px;
            border-radius: 15px;
            text-align: left;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .upgrade-card.disabled { opacity: 0.5; cursor: default; filter: grayscale(1); pointer-events: none; }
        .upgrade-card:not(.disabled):hover { background: var(--bg-glass-hover); transform: translateY(-3px); border-color: var(--accent-green); }
        
        .upgrade-name { font-weight: 700; display: block; margin-bottom: 5px; color: var(--text-main); }
        .upgrade-cost { color: var(--accent-gold); font-size: 0.9rem; font-weight: 600; }
        .upgrade-rate { color: var(--text-muted); font-size: 0.8rem; float: right; }
        .upgrade-count { position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; color: white; }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            z-index: 100; display: none; align-items: center; justify-content: center;
        }
        .modal-box {
            background: var(--bg-deep); border: 2px solid var(--accent-gold);
            padding: 40px; border-radius: 20px; max-width: 400px; text-align: center;
            box-shadow: 0 0 50px rgba(251, 191, 36, 0.3);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .modal-title { font-size: 2rem; color: var(--accent-gold); font-family: 'Outfit', sans-serif; margin-bottom: 10px; }
        .modal-btn { margin-top: 20px; background: var(--accent-gold); color: var(--bg-deep); border: none; padding: 10px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; }

        .footer-note { margin-top: 5rem; font-size: 0.9rem; color: rgba(255,255,255,0.4); line-height: 1.8; }
        .fb-link { color: var(--accent-gold); text-decoration: none; font-weight: 700; border-bottom: 1px dotted var(--accent-gold); }
        .reset-btn { background: none; border: 1px solid #f87171; color: #f87171; padding: 5px 15px; border-radius: 20px; margin-top: 20px; cursor: pointer; font-size: 0.8rem; }
        .reset-btn:hover { background: rgba(248, 113, 113, 0.1); }

        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="offline-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-title">Welcome Back!</div>
            <p>Your assets were working while you were gone.</p>
            <h2 id="offline-amount" style="margin: 20px 0; font-size: 2.5rem; color: var(--accent-green);">+$0.00</h2>
            <button class="modal-btn" onclick="closeModal('offline-modal')">Collect</button>
        </div>
    </div>

    <div id="win-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-title">üèÜ YOU MADE IT!</div>
            <p>You reached $1,000,000 without leaving the couch.</p>
            <div style="font-size: 4rem; margin: 20px;">üõãÔ∏èüëë</div>
            <p>You are a Couch Tycoon.</p>
            <button class="modal-btn" onclick="closeModal('win-modal')">Keep Earning</button>
            <button class="modal-btn" style="background: transparent; border: 1px solid var(--accent-gold); color: var(--accent-gold); margin-top: 10px;" onclick="prestigeReset()">Sell & Restart</button>
        </div>
    </div>

    <div class="container">
        <div class="brand">Couch Funds</div>
        
        <div class="tip-card">
            <span id="tip-label" class="tip-label">Tip of the Day</span>
            <div id="tip-text" class="tip-content">Loading wisdom...</div>
            <button class="btn-shuffle" onclick="showRandomTip()">‚Üª Shuffle Wisdom</button>
        </div>

        <div class="tip-card">
            <span class="tip-label">Investor Strategy Challenge</span>
            <p style="margin-bottom: 20px; font-size: 0.9rem; color: var(--text-muted);">Beat the Market (AI) to prove your skills.</p>
            <div id="ttt-board">
                </div>
            <p id="ttt-status" style="margin-top: 15px; color: var(--accent-gold); font-weight: bold;">Your Move, Investor.</p>
            <button class="btn-shuffle" onclick="resetTTT()">Restart Challenge</button>
        </div>

        <div class="game-section">
            <div class="goal-container">
                <div class="goal-labels">
                    <span>Progress</span>
                    <span>Goal: $1,000,000</span>
                </div>
                <div class="progress-bar-bg">
                    <div id="progress-fill" class="progress-bar-fill"></div>
                </div>
            </div>

            <div class="game-header">
                <div class="balance-subtitle">Net Worth</div>
                <div id="balance" class="balance-display">$0.00</div>
                <div id="income-display" class="balance-subtitle" style="color: var(--accent-green); margin-top: 5px;">+$0.00 / sec</div>
            </div>

            <div class="click-area">
                <div class="couch-btn" id="click-btn">üõãÔ∏è</div>
            </div>

            <div class="store-grid" id="store-grid">
                </div>
        </div>

        <div class="footer-note">
            Tips update daily.<br>
            Join the community on Facebook: <a href="https://web.facebook.com/profile.php?id=61587482075467" target="_blank" class="fb-link">CouchFunds</a><br>
            <button class="reset-btn" onclick="hardReset()">‚ö†Ô∏è Wipe Save & Reset</button>
        </div>
    </div>

    <script>
        // ============================================
        // 1. TIC TAC TOE ENGINE (INVESTOR vs MARKET)
        // ============================================
        let board = ["", "", "", "", "", "", "", "", ""];
        const player = "X";
        const ai = "O";
        const tttBoard = document.getElementById("ttt-board");
        const tttStatus = document.getElementById("ttt-status");

        function initTTT() {
            tttBoard.innerHTML = "";
            board.forEach((cell, i) => {
                const div = document.createElement("div");
                div.className = "ttt-cell";
                div.dataset.index = i;
                div.innerText = cell;
                if(cell) div.classList.add(cell.toLowerCase()); // Adds .x or .o class
                div.onclick = () => handleMove(i);
                tttBoard.appendChild(div);
            });
        }

        function handleMove(i) {
            if (board[i] || checkWinner(board)) return;
            board[i] = player;
            initTTT();
            
            if (!checkWinner(board) && board.includes("")) {
                tttStatus.innerText = "Market is thinking...";
                setTimeout(aiMove, 500); // Delay for realism
            } else {
                updateStatus();
            }
        }

        function aiMove() {
            let move;
            // 20% Chance the AI makes a "Lazy" mistake so users can win
            if (Math.random() < 0.20) {
                let available = board.map((v, i) => v === "" ? i : null).filter(v => v !== null);
                move = available[Math.floor(Math.random() * available.length)];
            } else {
                move = getBestMove(); // Minimax Algorithm
            }
            
            board[move] = ai;
            initTTT();
            updateStatus();
        }

        function updateStatus() {
            const win = checkWinner(board);
            if (win === "X") tttStatus.innerText = "üèÜ You beat the Market!";
            else if (win === "O") tttStatus.innerText = "üìâ Market Volatility won.";
            else if (!board.includes("")) tttStatus.innerText = "ü§ù It's a Market Draw.";
            else tttStatus.innerText = "Your move, X.";
        }

        function checkWinner(b) {
            const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
            for (let l of lines) {
                if (b[l[0]] && b[l[0]] === b[l[1]] && b[l[0]] === b[l[2]]) return b[l[0]];
            }
            return null;
        }

        function getBestMove() {
            let bestScore = -Infinity;
            let move;
            for (let i = 0; i < 9; i++) {
                if (board[i] === "") {
                    board[i] = ai;
                    let score = minimax(board, 0, false);
                    board[i] = "";
                    if (score > bestScore) {
                        bestScore = score;
                        move = i;
                    }
                }
            }
            return move;
        }

        function minimax(b, depth, isMaximizing) {
            let result = checkWinner(b);
            if (result === ai) return 10;
            if (result === player) return -10;
            if (!b.includes("")) return 0;

            if (isMaximizing) {
                let bestScore = -Infinity;
                for (let i = 0; i < 9; i++) {
                    if (b[i] === "") {
                        b[i] = ai;
                        bestScore = Math.max(bestScore, minimax(b, depth + 1, false));
                        b[i] = "";
                    }
                }
                return bestScore;
            } else {
                let bestScore = Infinity;
                for (let i = 0; i < 9; i++) {
                    if (b[i] === "") {
                        b[i] = player;
                        bestScore = Math.min(bestScore, minimax(b, depth + 1, true));
                        b[i] = "";
                    }
                }
                return bestScore;
            }
        }

        function resetTTT() {
            board = ["", "", "", "", "", "", "", "", ""];
            tttStatus.innerText = "Your move, X.";
            initTTT();
        }


        // ============================================
        // 2. TYCOON & WISDOM ENGINE
        // ============================================
        
        // --- CONFIGURATION ---
        const GOAL_AMOUNT = 1000000;
        let gameLoopInterval = null; 

        let gameState = {
            balance: 0.00,
            income: 0.00,
            clickValue: 1.00,
            hasWon: false,
            lastSaveTime: Date.now(),
            upgrades: [
                { id: 0, name: "Loose Change", cost: 15, income: 0.5, count: 0, icon: "ü™ô" },
                { id: 1, name: "Piggy Bank", cost: 100, income: 4, count: 0, icon: "üê∑" },
                { id: 2, name: "Lemonade Stand", cost: 1100, income: 12, count: 0, icon: "üçã" },
                { id: 3, name: "Vending Machine", cost: 12000, income: 48, count: 0, icon: "üç´" },
                { id: 4, name: "ATM", cost: 130000, income: 240, count: 0, icon: "üèß" },
                { id: 5, name: "Bank Branch", cost: 1400000, income: 960, count: 0, icon: "üè¶" }
            ]
        };

        // --- TIPS SYSTEM ---
        const tips = [
            "The best time to plant a money tree was 20 years ago. The second best time is today.",
            "Compound interest is the eighth wonder of the world. He who understands it, earns it.",
            "Wealth isn't about having a lot of money; it's about having a lot of options.",
            "Don't save what is left after spending; spend what is left after saving.",
            "A budget is telling your money where to go instead of wondering where it went.",
            "Rich people stay rich by living like they're broke. Broke people stay broke by living like they're rich.",
            "Passive income is the only true financial freedom.",
            "Invest in yourself. Your knowledge is the engine of your wealth.",
            "Automate your savings. Willpower is a limited resource.",
            "The goal is not to look rich, the goal is to be rich.",
            "Do not wait to buy real estate. Buy real estate and wait.",
            "Your network is your net worth.",
            "Time in the market beats timing the market.",
            "Assets put money in your pocket. Liabilities take money out of your pocket.",
            "Don't trade your time for money forever. Trade your money for time.",
            "Price is what you pay. Value is what you get.",
            "A penny saved is a penny earned.",
            "The rich invest in time, the poor invest in money.",
            "If you can't buy it twice, you can't afford it.",
            "Money is a terrible master but an excellent servant.",
            "Track your net worth, not just your salary.",
            "An investment in knowledge pays the best interest.",
            "Live below your means, but expand your means."
        ];

        function getTipOfTheDay() {
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            return tips[dayOfYear % tips.length];
        }

        function renderTip(text) {
            const el = document.getElementById('tip-text');
            el.classList.remove('fade-in');
            void el.offsetWidth;
            el.textContent = text;
            el.classList.add('fade-in');
        }

        function showRandomTip() {
            renderTip(tips[Math.floor(Math.random() * tips.length)]);
        }

        // --- CORE TYCOON ENGINE ---
        const moneyFormat = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 });
        const balanceEl = document.getElementById('balance');
        const incomeEl = document.getElementById('income-display');
        const progressFill = document.getElementById('progress-fill');

        function loadGame() {
            const saved = localStorage.getItem('couchPotatoTycoon_V3');
            if (saved) {
                const loadedState = JSON.parse(saved);
                gameState.balance = loadedState.balance || 0;
                gameState.hasWon = loadedState.hasWon || false;
                
                // Calculate Offline Earnings
                if (loadedState.lastSaveTime) {
                    const now = Date.now();
                    const secondsGone = (now - loadedState.lastSaveTime) / 1000;
                    
                    let tempIncome = 0;
                    loadedState.upgrades.forEach(u => tempIncome += u.income * u.count);
                    
                    if (tempIncome > 0 && secondsGone > 10) {
                        const earned = secondsGone * tempIncome;
                        gameState.balance += earned;
                        showOfflineEarnings(earned);
                    }
                }

                // Restore Upgrades
                gameState.upgrades.forEach((u, i) => {
                    if (loadedState.upgrades[i]) {
                        u.count = loadedState.upgrades[i].count;
                        u.cost = Math.floor(u.cost * Math.pow(1.15, u.count));
                    }
                });
            }
            recalcIncome();
        }

        function saveGame() {
            if (!gameLoopInterval) return; // Don't save if resetting
            gameState.lastSaveTime = Date.now();
            localStorage.setItem('couchPotatoTycoon_V3', JSON.stringify(gameState));
        }

        function hardReset() {
            if(confirm("‚ö†Ô∏è RESET WARNING ‚ö†Ô∏è\n\nAre you sure you want to delete your save file and start over? This cannot be undone.")) {
                if (gameLoopInterval) {
                    clearInterval(gameLoopInterval);
                    gameLoopInterval = null;
                }
                localStorage.removeItem('couchPotatoTycoon_V3');
                location.reload();
            }
        }

        function prestigeReset() {
             if (gameLoopInterval) {
                clearInterval(gameLoopInterval);
                gameLoopInterval = null;
            }
            localStorage.removeItem('couchPotatoTycoon_V3');
            location.reload();
        }

        function recalcIncome() {
            let totalIncome = 0;
            gameState.upgrades.forEach(u => totalIncome += u.income * u.count);
            gameState.income = totalIncome;
            incomeEl.textContent = `+${moneyFormat.format(totalIncome)} / sec`;
        }

        // --- UI RENDERER ---
        function initStore() {
            const grid = document.getElementById('store-grid');
            grid.innerHTML = '';
            gameState.upgrades.forEach((u, index) => {
                const card = document.createElement('div');
                card.id = `upgrade-card-${index}`;
                card.className = 'upgrade-card disabled'; 
                card.innerHTML = `
                    <div class="upgrade-count" id="count-${index}">${u.count}</div>
                    <span class="upgrade-name">${u.icon} ${u.name}</span>
                    <span class="upgrade-cost" id="cost-${index}">${moneyFormat.format(u.cost)}</span>
                    <span class="upgrade-rate">+${u.income}/s</span>
                `;
                card.onclick = () => buyUpgrade(index);
                grid.appendChild(card);
            });
        }

        function updateUI() {
            balanceEl.textContent = moneyFormat.format(gameState.balance);
            
            // Progress Bar
            let percentage = (gameState.balance / GOAL_AMOUNT) * 100;
            if (percentage > 100) percentage = 100;
            progressFill.style.width = `${percentage}%`;

            // Win Condition
            if (gameState.balance >= GOAL_AMOUNT && !gameState.hasWon) {
                triggerWin();
            }

            // Store Buttons
            gameState.upgrades.forEach((u, index) => {
                const card = document.getElementById(`upgrade-card-${index}`);
                const countEl = document.getElementById(`count-${index}`);
                const costEl = document.getElementById(`cost-${index}`);

                if (gameState.balance >= u.cost) { card.classList.remove('disabled'); } 
                else { card.classList.add('disabled'); }

                countEl.textContent = u.count;
                costEl.textContent = moneyFormat.format(u.cost);
            });
        }

        function buyUpgrade(index) {
            const u = gameState.upgrades[index];
            if (gameState.balance >= u.cost) {
                gameState.balance -= u.cost;
                u.count++;
                u.cost = Math.floor(u.cost * 1.15);
                recalcIncome();
                updateUI();
                saveGame();
            }
        }

        // --- INTERACTION ---
        function spawnFloatingText(amount, x, y) {
            const el = document.createElement('div');
            el.className = 'floating-text';
            el.textContent = `+${moneyFormat.format(amount)}`;
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        document.getElementById('click-btn').addEventListener('mousedown', (e) => {
            gameState.balance += gameState.clickValue;
            updateUI();
            
            const rect = e.target.getBoundingClientRect();
            const x = e.clientX || (rect.left + rect.width / 2);
            const y = e.clientY || (rect.top + rect.height / 2);
            spawnFloatingText(gameState.clickValue, x, y);
            saveGame();
        });

        // --- MODALS ---
        function showOfflineEarnings(amount) {
            document.getElementById('offline-amount').textContent = `+${moneyFormat.format(amount)}`;
            document.getElementById('offline-modal').style.display = 'flex';
        }

        function triggerWin() {
            gameState.hasWon = true;
            document.getElementById('win-modal').style.display = 'flex';
            saveGame();
        }

        function closeModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Load Wisdom
            renderTip(getTipOfTheDay());
            
            // Load TTT
            initTTT();

            // Load Tycoon
            initStore();
            loadGame();
            updateUI();

            // Start Game Loop
            gameLoopInterval = setInterval(() => {
                if (gameState.income > 0) {
                    gameState.balance += gameState.income / 10;
                    updateUI();
                    saveGame();
                }
            }, 100);
        });

    </script>
</body>
</html>
